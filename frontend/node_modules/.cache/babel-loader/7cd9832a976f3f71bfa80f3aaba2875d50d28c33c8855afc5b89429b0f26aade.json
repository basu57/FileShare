{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Badge,Alert}from'react-bootstrap';import{Link}from'react-router-dom';import{FaEye,FaUser}from'react-icons/fa';import axios from'../../utils/axios';import{toast}from'react-toastify';import Spinner from'../../components/layout/Spinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SharedWithMe=()=>{const[documents,setDocuments]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchSharedDocuments=async()=>{try{const res=await axios.get('/api/documents/shared');setDocuments(res.data.data);}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to fetch shared documents');toast.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Failed to fetch shared documents');}finally{setLoading(false);}};fetchSharedDocuments();},[]);if(loading){return/*#__PURE__*/_jsx(Spinner,{});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Documents Shared With Me\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),documents.length===0?/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"No documents have been shared with you yet.\"}):/*#__PURE__*/_jsx(Row,{children:documents.map(document=>{// Find the share entry for the current user\nconst myShare=document.sharedWith.find(share=>share.user===document.owner._id);return/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{className:\"document-card h-100 shadow-sm\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:document.title}),/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",className:\"mb-2\",children:document.documentType}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(FaUser,{className:\"me-1\"}),\" Shared by: \",document.owner.name]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Shared on: \",new Date(myShare===null||myShare===void 0?void 0:myShare.sharedAt).toLocaleDateString()]})}),/*#__PURE__*/_jsx(Badge,{bg:(myShare===null||myShare===void 0?void 0:myShare.accessLevel)==='edit'?'success':'info',className:\"mb-3\",children:(myShare===null||myShare===void 0?void 0:myShare.accessLevel)==='edit'?'Can Edit':'View Only'}),/*#__PURE__*/_jsx(Card.Text,{children:document.description.length>100?`${document.description.substring(0,100)}...`:document.description})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"bg-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(Button,{as:Link,to:`/documents/${document._id}`,variant:\"outline-primary\",children:[/*#__PURE__*/_jsx(FaEye,{className:\"me-1\"}),\" View Document\"]})})})]})},document._id);})})]});};export default SharedWithMe;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Badge","Alert","Link","FaEye","FaUser","axios","toast","Spinner","jsx","_jsx","jsxs","_jsxs","SharedWithMe","documents","setDocuments","loading","setLoading","error","setError","fetchSharedDocuments","res","get","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","response","message","children","className","variant","length","map","document","myShare","sharedWith","find","share","user","owner","_id","md","Body","Title","title","bg","documentType","name","Date","sharedAt","toLocaleDateString","accessLevel","Text","description","substring","Footer","as","to"],"sources":["C:/Users/HP/Desktop/fileshare/client/src/pages/dashboard/SharedWithMe.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Button, Badge, Alert } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { FaEye, FaUser } from 'react-icons/fa';\nimport axios from '../../utils/axios';\nimport { toast } from 'react-toastify';\nimport Spinner from '../../components/layout/Spinner';\n\nconst SharedWithMe = () => {\n  const [documents, setDocuments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchSharedDocuments = async () => {\n      try {\n        const res = await axios.get('/api/documents/shared');\n        setDocuments(res.data.data);\n      } catch (err) {\n        setError(err.response?.data?.message || 'Failed to fetch shared documents');\n        toast.error(err.response?.data?.message || 'Failed to fetch shared documents');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSharedDocuments();\n  }, []);\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  return (\n    <Container>\n      <h1 className=\"mb-4\">Documents Shared With Me</h1>\n\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n\n      {documents.length === 0 ? (\n        <Alert variant=\"info\">\n          No documents have been shared with you yet.\n        </Alert>\n      ) : (\n        <Row>\n          {documents.map((document) => {\n            // Find the share entry for the current user\n            const myShare = document.sharedWith.find(\n              (share) => share.user === document.owner._id\n            );\n            \n            return (\n              <Col md={4} key={document._id} className=\"mb-4\">\n                <Card className=\"document-card h-100 shadow-sm\">\n                  <Card.Body>\n                    <Card.Title>{document.title}</Card.Title>\n                    <Badge bg=\"secondary\" className=\"mb-2\">\n                      {document.documentType}\n                    </Badge>\n                    <div className=\"mb-2\">\n                      <small className=\"text-muted\">\n                        <FaUser className=\"me-1\" /> Shared by: {document.owner.name}\n                      </small>\n                    </div>\n                    <div className=\"mb-2\">\n                      <small className=\"text-muted\">\n                        Shared on: {new Date(myShare?.sharedAt).toLocaleDateString()}\n                      </small>\n                    </div>\n                    <Badge \n                      bg={myShare?.accessLevel === 'edit' ? 'success' : 'info'} \n                      className=\"mb-3\"\n                    >\n                      {myShare?.accessLevel === 'edit' ? 'Can Edit' : 'View Only'}\n                    </Badge>\n                    <Card.Text>\n                      {document.description.length > 100\n                        ? `${document.description.substring(0, 100)}...`\n                        : document.description}\n                    </Card.Text>\n                  </Card.Body>\n                  <Card.Footer className=\"bg-white\">\n                    <div className=\"d-flex justify-content-center\">\n                      <Button\n                        as={Link}\n                        to={`/documents/${document._id}`}\n                        variant=\"outline-primary\"\n                      >\n                        <FaEye className=\"me-1\" /> View Document\n                      </Button>\n                    </div>\n                  </Card.Footer>\n                </Card>\n              </Col>\n            );\n          })}\n        </Row>\n      )}\n    </Container>\n  );\n};\n\nexport default SharedWithMe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
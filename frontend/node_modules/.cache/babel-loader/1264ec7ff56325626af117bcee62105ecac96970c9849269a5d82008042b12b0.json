{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Badge,Alert}from'react-bootstrap';import{Link}from'react-router-dom';import{FaEye,FaTrash,FaShare,FaEdit}from'react-icons/fa';import axios from'../../utils/axios';import{toast}from'react-toastify';import Spinner from'../../components/layout/Spinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyDocuments=()=>{const[documents,setDocuments]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchDocuments=async()=>{try{const res=await axios.get('/api/documents');setDocuments(res.data.data);}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to fetch documents');toast.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Failed to fetch documents');}finally{setLoading(false);}};fetchDocuments();},[]);const handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this document?')){try{await axios.delete(`/api/documents/${id}`);setDocuments(documents.filter(doc=>doc._id!==id));toast.success('Document deleted successfully');}catch(err){var _err$response3,_err$response3$data;toast.error(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Failed to delete document');}}};if(loading){return/*#__PURE__*/_jsx(Spinner,{});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Documents\"}),/*#__PURE__*/_jsx(Button,{as:Link,to:\"/upload-document\",variant:\"primary\",children:\"Upload New Document\"})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),documents.length===0?/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"You don't have any documents yet. Click the button above to upload your first document.\"}):/*#__PURE__*/_jsx(Row,{children:documents.map(document=>/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{className:\"document-card h-100 shadow-sm\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:document.title}),/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",className:\"mb-2\",children:document.documentType}),/*#__PURE__*/_jsxs(Card.Text,{className:\"text-muted small\",children:[\"Uploaded: \",new Date(document.createdAt).toLocaleDateString()]}),/*#__PURE__*/_jsx(Card.Text,{className:\"mb-3\",children:document.description.length>100?`${document.description.substring(0,100)}...`:document.description}),/*#__PURE__*/_jsxs(Card.Text,{className:\"text-muted small\",children:[\"Shared with: \",document.sharedWith.length,\" people\"]})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(Button,{as:Link,to:`/documents/${document._id}`,variant:\"outline-primary\",size:\"sm\",children:[/*#__PURE__*/_jsx(FaEye,{className:\"me-1\"}),\" View\"]}),/*#__PURE__*/_jsxs(Button,{as:Link,to:`/documents/${document._id}`,variant:\"outline-success\",size:\"sm\",children:[/*#__PURE__*/_jsx(FaEdit,{className:\"me-1\"}),\" Edit\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-info\",size:\"sm\",as:Link,to:`/documents/${document._id}`,state:{shareTab:true},children:[/*#__PURE__*/_jsx(FaShare,{className:\"me-1\"}),\" Share\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-danger\",size:\"sm\",onClick:()=>handleDelete(document._id),children:[/*#__PURE__*/_jsx(FaTrash,{className:\"me-1\"}),\" Delete\"]})]})})]})},document._id))})]});};export default MyDocuments;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Badge","Alert","Link","FaEye","FaTrash","FaShare","FaEdit","axios","toast","Spinner","jsx","_jsx","jsxs","_jsxs","MyDocuments","documents","setDocuments","loading","setLoading","error","setError","fetchDocuments","res","get","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","response","message","handleDelete","id","window","confirm","delete","filter","doc","_id","success","_err$response3","_err$response3$data","children","className","as","to","variant","length","map","document","md","Body","Title","title","bg","documentType","Text","Date","createdAt","toLocaleDateString","description","substring","sharedWith","Footer","size","state","shareTab","onClick"],"sources":["C:/Users/HP/Desktop/fileshare/client/src/pages/dashboard/MyDocuments.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Button, Badge, Alert } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { FaEye, FaTrash, FaShare, FaEdit } from 'react-icons/fa';\nimport axios from '../../utils/axios';\nimport { toast } from 'react-toastify';\nimport Spinner from '../../components/layout/Spinner';\n\nconst MyDocuments = () => {\n  const [documents, setDocuments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchDocuments = async () => {\n      try {\n        const res = await axios.get('/api/documents');\n        setDocuments(res.data.data);\n      } catch (err) {\n        setError(err.response?.data?.message || 'Failed to fetch documents');\n        toast.error(err.response?.data?.message || 'Failed to fetch documents');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchDocuments();\n  }, []);\n\n  const handleDelete = async (id) => {\n    if (window.confirm('Are you sure you want to delete this document?')) {\n      try {\n        await axios.delete(`/api/documents/${id}`);\n        setDocuments(documents.filter(doc => doc._id !== id));\n        toast.success('Document deleted successfully');\n      } catch (err) {\n        toast.error(err.response?.data?.message || 'Failed to delete document');\n      }\n    }\n  };\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  return (\n    <Container>\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\n        <h1>My Documents</h1>\n        <Button as={Link} to=\"/upload-document\" variant=\"primary\">\n          Upload New Document\n        </Button>\n      </div>\n\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n\n      {documents.length === 0 ? (\n        <Alert variant=\"info\">\n          You don't have any documents yet. Click the button above to upload your first document.\n        </Alert>\n      ) : (\n        <Row>\n          {documents.map((document) => (\n            <Col md={4} key={document._id} className=\"mb-4\">\n              <Card className=\"document-card h-100 shadow-sm\">\n                <Card.Body>\n                  <Card.Title>{document.title}</Card.Title>\n                  <Badge bg=\"secondary\" className=\"mb-2\">\n                    {document.documentType}\n                  </Badge>\n                  <Card.Text className=\"text-muted small\">\n                    Uploaded: {new Date(document.createdAt).toLocaleDateString()}\n                  </Card.Text>\n                  <Card.Text className=\"mb-3\">\n                    {document.description.length > 100\n                      ? `${document.description.substring(0, 100)}...`\n                      : document.description}\n                  </Card.Text>\n                  <Card.Text className=\"text-muted small\">\n                    Shared with: {document.sharedWith.length} people\n                  </Card.Text>\n                </Card.Body>\n                <Card.Footer className=\"bg-white\">\n                  <div className=\"d-flex justify-content-between\">\n                    <Button\n                      as={Link}\n                      to={`/documents/${document._id}`}\n                      variant=\"outline-primary\"\n                      size=\"sm\"\n                    >\n                      <FaEye className=\"me-1\" /> View\n                    </Button>\n                    <Button\n                      as={Link}\n                      to={`/documents/${document._id}`}\n                      variant=\"outline-success\"\n                      size=\"sm\"\n                    >\n                      <FaEdit className=\"me-1\" /> Edit\n                    </Button>\n                    <Button\n                      variant=\"outline-info\"\n                      size=\"sm\"\n                      as={Link}\n                      to={`/documents/${document._id}`}\n                      state={{ shareTab: true }}\n                    >\n                      <FaShare className=\"me-1\" /> Share\n                    </Button>\n                    <Button\n                      variant=\"outline-danger\"\n                      size=\"sm\"\n                      onClick={() => handleDelete(document._id)}\n                    >\n                      <FaTrash className=\"me-1\" /> Delete\n                    </Button>\n                  </div>\n                </Card.Footer>\n              </Card>\n            </Col>\n          ))}\n        </Row>\n      )}\n    </Container>\n  );\n};\n\nexport default MyDocuments;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}